<% layout("/layouts/boilerplate") -%>

    <!-- <h3>All Listings</h3> -->
    <!-- <FORM method="GET" action ="/listings/new">
        <button >
            Create new Listing
        </button>
    </FORM> -->

    <!-- <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-2">
      <% for(let listing of allListings){ %>
        <a href="/listings/<%= listing._id%>" class="listing-link">
          <div class="card col" style="width: 20rem;">
           
            <img class="card-img-top" src="<%= listing.image.url %>" alt="listing_image" style="height:20rem">

            
              <div class="card-img-overlay">
                Card title
              </div>
            
            <div class="card-body">
              <p class="card-text">
                <b><%= listing.title %></b> <br>
                &#8377;<%= listing.price.toLocaleString("en-IN") %>/ night
            </p>
            </div>
          </div>
        </a>
        
          <%  } %>
    </div>
    

 -->



  
  </head>
  <body>
    <div class="container my-4">
      <style>
        
        .form-check-input {
          width: 44px;
          height: 24px;
          background-color: transparent; /* No background color */
          border-radius: 24px;
          border: 1px solid #000; /* black border */
          transition: all 0.3s ease;
          appearance: none;
          position: relative;
          cursor: pointer;
        }
        
        .form-check-input::before {
          content: "";
          position: absolute;
          top: 2px;
          left: 2px;
          width: 20px;
          height: 20px;
          background-color: #000; /* black thumb */
          border-radius: 50%;
          transition: 0.3s;
        }
        
        .form-check-input:checked {
          background-color: transparent; /* No background on active too */
        }
        
        .form-check-input:checked::before {
          transform: translateX(20px);
        }
        
        /* --- REMOVE unwanted blue focus --- */
        .form-check-input:focus {
          box-shadow: none;
          outline: none;
        }
        
        /* --- BOX AROUND SWITCH + TEXT --- */
        .total-box {
          display: flex;
          align-items: center;
          gap: 10px;
          padding: 6px 16px;
          border: 2px solid #000; /* black border */
          border-radius: 30px;
          background-color: white; /* White background */
        }
        
        .total-box label {
          font-weight: bold;
          color: black;
          margin-bottom: 0;
          font-size: 14px;
        }
        
        /* --- TEXT FOR DISPLAY TOTAL AFTER TAX --- */
        #totalAfterTax h5 {
          color: black;
          font-weight: bold;
        }
        .toggle-box label {
          font-weight: bold;
          color: black;
          margin-bottom: 0;
          font-size: 14px;
        }
        
        /* --- Create Listing Button --- */
        .btn-danger {
          border-radius: 30px;
          padding: 6px 20px;
          font-weight: 500;
       
          color: white; /* White text */
        }
        
        
        
        /* --- TEXT FOR DISPLAY TOTAL AFTER TAX --- */
        #totalAfterTax h5 {
          color: black;
          font-weight: bold;
        }
        
        .filters-container {
          position: relative;
          overflow: hidden;
          padding: 20px 0;
          background: #fff;
        }
        
        .filters {
          display: flex;
          overflow-x: auto;
          scrollbar-width: none; /* Firefox */
          -ms-overflow-style: none; /* IE 10+ */
          
          gap: 30px;
          padding: 0 20px;
        }
        .filters::-webkit-scrollbar {
          display: none; /* Chrome, Safari */
        }
      
        .filter {
          flex: 0 0 auto;
          text-align: center;
          font-family: 'Poppins', sans-serif;
          color: #666;
          cursor: pointer;
          transition: color 0.3s ease;
          min-width: 80px;
          
        }
        .filter i {
          font-size: 24px;
          margin-bottom: 8px;
          transition: color 0.3s ease;
        }
        .filter span {
          display: block;
          font-weight: 500;
          margin-top: 5px;
          font-size: 14px;
        }
        .filter:hover,
        .filter:hover i {
          color: #000;
        }
      
        /* Blurry sides */
        .left-blur, .right-blur {
          position: absolute;
          top: 0;
          bottom: 0;
          width: 60px;
          background: linear-gradient(to right, white 60%, rgba(255,255,255,0));
          z-index: 10;
          pointer-events: none;
        }
        .right-blur {
          right: 0;
          background: linear-gradient(to left, white 60%, rgba(255,255,255,0));
        }
        .left-blur {
          left: 0;
        }
        .tax-info{
          display: none;
        }

        .tax-toggle{
          border:1px solid black;
          border-radius: 1rem;
          height: 2.75rem;
          padding: 0.5rem;
          display: flex;
          align-items: center;
        }
      </style>
      
      <div class="filters-container">
        <div class="left-blur"></div>
        <div class="filters">

          <div>
           
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-fire"></i>
            <span>Trending</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-eye"></i>
            <span>Amazing Views</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-water"></i>
            <span>Amazing Pools</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-umbrella-beach"></i>
            <span>Beachfront</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-bread-slice"></i>
            <span>Bed & Breakfast</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-box"></i>
            <span>Containers</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-tractor"></i>
            <span>Farms</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-bolt"></i>
            <span>OMG!</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-tree"></i>
            <span>Cabins</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-chess-rook"></i>
            <span>Mansions</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-tree"></i>
            <span>Treehouses</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-door-open"></i>
            <span>Rooms</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-gem"></i>
            <span>Luxe</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-water"></i>
            <span>Lakefront</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-landmark"></i>
            <span>Historical Homes</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-house"></i>
            <span>Tiny Homes</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-island-tropical"></i>
            <span>Islands</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-tractor"></i>
            <span>Countryside</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-water"></i>
            <span>Lake</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-chess-rook"></i>
            <span>Castles</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-city"></i>
            <span>Top Cities</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-leaf"></i>
            <span>Earth Homes</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-tree"></i>
            <span>National Parks</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-mountain"></i>
            <span>Top of the World</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-circle"></i>
            <span>Domes</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-ban"></i>
            <span>Off-the-grid</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-skiing"></i>
            <span>Skiing</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-campground"></i>
            <span>Camping</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-play"></i>
            <span>Play</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-mountain"></i>
            <span>Caves</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-ship"></i>
            <span>Houseboats</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-snowflake"></i>
            <span>Arctic</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-campground"></i>
            <span>Yurts</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-sparkles"></i>
            <span>New</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-house"></i>
            <span>Shepherd's Huts</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-minus"></i>
            <span>Minus</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-umbrella-beach"></i>
            <span>Beach</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-hotel"></i>
            <span>Riads</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-home"></i>
            <span>Dammusi</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-warehouse"></i>
            <span>Barns</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-skiing"></i>
            <span>Ski-in/out</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-wind"></i>
            <span>Windmills</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-wine-bottle"></i>
            <span>Vineyards</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-caravan"></i>
            <span>Camper Vans</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-ship"></i>
            <span>Boats</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-building"></i>
            <span>Towers</span>
          </div>
      
          <div class="filter">
            <i class="fa-solid fa-water"></i>
            <span>Surfing</span>
          </div>

          <div>

          </div>
      
        </div>
        <div class="right-blur"></div>

      </div>
      
      
      <div class="container mt-4">
        <div class="d-flex justify-content-end align-items-center gap-3 mb-3">
      
          <div class="d-flex align-items-center gap-2 tax-toggle ">
            <div class="form-check form-switch m-0">
              <input class="form-check-input" type="checkbox" id="taxToggle" onchange="toggleTotal()">
            </div>
            <label class="form-check-label" for="taxToggle" style="margin-bottom: 0;"><b>Display Total after Tax</b></label>
          </div>
      
          <form method="GET" action="/listings/new" class="m-0">
            <button class="btn btn-danger">Create New Listing</button>
          </form>
      
        </div>
      
        <div id="totalAfterTax" class="text-end mt-3" style="display: none;">
          
        </div>
      </div>
      
      <div class="row g-4  row-cols-1 row-cols-sm-2 row-cols-md-3">
        <% for(let listing of allListings) { %>
          <div class="col">
            <a href="/listings/<%= listing._id %>" class="listing-link">
              <div class="card h-100">
                <img
                  class="card-img-top"
                  src="<%= listing.image.url %>"
                  alt="listing image"
                />
                <div class="card-body">
                  <h5 class="card-title"><%= listing.title %></h5>
                  <p class="card-text">
                    &#8377;<%= listing.price.toLocaleString("en-IN") %> for 5 nights
                    <i class="tax-info" style="display: none;">&nbsp; &nbsp;+18% GST</i>
                  </p>
                </div>
              </div>
            </a>
          </div>
        <% } %>
      </div>
    </div>
  
    <script>
      function toggleTotal() {
        let totalElement = document.getElementById('totalAfterTax');
        let taxInfoElements = document.getElementsByClassName('tax-info');
        let switchElement = document.getElementById('taxToggle');
    
        // If switch is checked
        if (switchElement.checked) {
          totalElement.style.display = 'block'; // show total after tax
          for (let info of taxInfoElements) {
            info.style.display = 'inline'; // show +18% GST
          }
        } else {
          totalElement.style.display = 'none'; // hide total after tax
          for (let info of taxInfoElements) {
            info.style.display = 'none'; // hide +18% GST
          }
        }
      }
    </script>
    



     